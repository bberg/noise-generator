<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Noise Generator - White, Pink & Brown Noise for Sleep, Focus & Relaxation</title>
    <meta name="description" content="Free online noise generator with white, pink, and brown noise. Perfect for sleep, focus, studying, relaxation, and tinnitus masking. No downloads required.">
    <meta name="keywords" content="noise generator, white noise, pink noise, brown noise, sleep sounds, focus music, relaxation, tinnitus masking">
    <link rel="icon" type="image/svg+xml" href="{{ url_for('static', filename='favicon.svg') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">
</head>
<body>
    <div class="container">
        <header class="page-header">
            <div class="header-content">
                <h1>Noise Generator</h1>
                <p class="tagline">White, pink & brown noise for sleep, focus, and relaxation</p>
            </div>
            <div class="header-badges">
                <span class="header-badge"><i class="ri-moon-line"></i> Sleep</span>
                <span class="header-badge"><i class="ri-focus-3-line"></i> Focus</span>
                <span class="header-badge"><i class="ri-heart-pulse-line"></i> Relax</span>
            </div>
        </header>

        <nav class="mini-nav">
            <a href="#generator" class="nav-link"><i class="ri-sound-module-line"></i> Generator</a>
            <a href="#mixer" class="nav-link"><i class="ri-equalizer-line"></i> Mixer</a>
            <a href="#advanced" class="nav-link"><i class="ri-settings-4-line"></i> Advanced</a>
            <a href="#about-noise" class="nav-link"><i class="ri-question-line"></i> Science</a>
            <a href="#algorithms" class="nav-link"><i class="ri-code-s-slash-line"></i> Math</a>
        </nav>

        <div class="main-controls" id="generator">
            <!-- Presets -->
            <div class="presets">
                <div class="preset-group">
                    <h3>Use Cases</h3>
                    <div class="preset-buttons">
                        <button class="preset-btn" data-preset="sleep">
                            <i class="ri-moon-line"></i> Sleep
                        </button>
                        <button class="preset-btn" data-preset="focus">
                            <i class="ri-focus-3-line"></i> Focus
                        </button>
                        <button class="preset-btn" data-preset="relax">
                            <i class="ri-heart-pulse-line"></i> Relax
                        </button>
                    </div>
                </div>
                <div class="preset-group">
                    <h3>Pure Noise Types</h3>
                    <div class="preset-buttons">
                        <button class="preset-btn" data-preset="white">
                            <i class="ri-flashlight-line"></i> White
                        </button>
                        <button class="preset-btn" data-preset="pink">
                            <i class="ri-contrast-line"></i> Pink
                        </button>
                        <button class="preset-btn" data-preset="brown">
                            <i class="ri-cloud-line"></i> Brown
                        </button>
                    </div>
                </div>
            </div>

            <!-- Status -->
            <div class="status-badge ready" id="statusBadge">
                <span class="status-icon">‚óè</span>
                <span class="status-text">Ready</span>
            </div>

            <!-- Play Button -->
            <div class="action-buttons">
                <button id="playButton" class="primary-btn">
                    <i class="ri-play-fill"></i>
                    <span>Play</span>
                </button>
            </div>

            <!-- Waveform Visualization -->
            <div class="waveform-container">
                <div class="waveform-header">
                    <span class="waveform-title">Waveform</span>
                </div>
                <canvas id="waveformCanvas"></canvas>
            </div>
        </div>

        <!-- Mixer Controls -->
        <div class="controls" id="mixer">
            <div class="control-group noise-mixer">
                <h3>Noise Mixer</h3>

                <div class="noise-channel">
                    <label for="whiteLevel">
                        <span class="noise-label">White Noise</span>
                        <span class="noise-desc">All frequencies, equal energy</span>
                    </label>
                    <input type="range" id="whiteLevel" min="0" max="100" value="0">
                    <span class="value" id="whiteValue">0%</span>
                </div>

                <div class="noise-channel">
                    <label for="pinkLevel">
                        <span class="noise-label">Pink Noise</span>
                        <span class="noise-desc">Balanced, natural sounding</span>
                    </label>
                    <input type="range" id="pinkLevel" min="0" max="100" value="50">
                    <span class="value" id="pinkValue">50%</span>
                </div>

                <div class="noise-channel">
                    <label for="brownLevel">
                        <span class="noise-label">Brown Noise</span>
                        <span class="noise-desc">Deep, rumbling bass</span>
                    </label>
                    <input type="range" id="brownLevel" min="0" max="100" value="0">
                    <span class="value" id="brownValue">0%</span>
                </div>
            </div>

            <div class="control-group">
                <h3>Volume & Timer</h3>

                <label for="volume">Master Volume</label>
                <input type="range" id="volume" min="0" max="100" value="50">
                <span class="value" id="volumeValue">50%</span>

                <label>Sleep Timer</label>
                <div class="timer-buttons">
                    <button class="timer-btn" data-time="0">Off</button>
                    <button class="timer-btn" data-time="15">15m</button>
                    <button class="timer-btn" data-time="30">30m</button>
                    <button class="timer-btn" data-time="60">1h</button>
                    <button class="timer-btn" data-time="120">2h</button>
                </div>
                <div class="timer-display" id="timerDisplay">
                    <span class="timer-label">Time remaining:</span>
                    <span class="timer-value" id="timerValue">--:--</span>
                </div>
            </div>
        </div>

        <!-- Advanced Controls -->
        <div class="controls advanced-controls" id="advanced">
            <div class="control-group">
                <h3>Frequency Shaping</h3>

                <label for="lowCut">Low Cut (Hz)</label>
                <input type="range" id="lowCut" min="20" max="500" value="20">
                <span class="value" id="lowCutValue">20 Hz</span>

                <label for="highCut">High Cut (Hz)</label>
                <input type="range" id="highCut" min="1000" max="20000" value="20000">
                <span class="value" id="highCutValue">20000 Hz</span>

                <label for="stereoWidth">Stereo Width</label>
                <input type="range" id="stereoWidth" min="0" max="100" value="100">
                <span class="value" id="stereoWidthValue">100%</span>
            </div>

            <div class="control-group">
                <h3>Modulation</h3>

                <label for="oscillation">Oscillation Depth</label>
                <input type="range" id="oscillation" min="0" max="100" value="0">
                <span class="value" id="oscillationValue">0%</span>

                <label for="oscillationRate">Oscillation Rate (Hz)</label>
                <input type="range" id="oscillationRate" min="1" max="100" value="10">
                <span class="value" id="oscillationRateValue">0.1 Hz</span>

                <label for="fadeTime">Fade In/Out (sec)</label>
                <input type="range" id="fadeTime" min="0" max="30" value="3">
                <span class="value" id="fadeTimeValue">3 sec</span>
            </div>
        </div>

        <!-- Educational Content -->
        <section class="content-section" id="about-noise">
            <article class="content-article">
                <h2>The Science of Noise</h2>
                <p class="intro-text">Not all noise is created equal. Different "colors" of noise have distinct frequency distributions that affect how we perceive them and how they influence our brain. Understanding these differences can help you choose the right noise for your needs.</p>

                <h3>What is Sound Color?</h3>
                <p>Just as light has colors determined by wavelength, sound has "colors" determined by how energy is distributed across frequencies. White light contains all visible wavelengths equally; white noise contains all audible frequencies at equal power. Other noise colors have different frequency weightings that change their character and usefulness.</p>

                <div class="info-grid">
                    <div class="info-card">
                        <h4><i class="ri-flashlight-line"></i> White Noise</h4>
                        <p>Contains all frequencies at equal intensity, creating a consistent "hiss" sound. White noise is excellent for masking sudden sounds like traffic or conversation because it covers the entire audible spectrum. It's commonly used in offices, for baby sleep, and in audio testing.</p>
                        <p class="noise-specs"><strong>Character:</strong> Bright, hissy, energetic<br><strong>Best for:</strong> Sound masking, concentration, audio calibration</p>
                    </div>

                    <div class="info-card">
                        <h4><i class="ri-contrast-line"></i> Pink Noise</h4>
                        <p>Has equal energy per octave, meaning lower frequencies are louder than higher ones (3dB/octave rolloff). This creates a more balanced, natural sound that many find more pleasant than white noise. Pink noise mimics the frequency distribution of many natural sounds like rainfall and rustling leaves.</p>
                        <p class="noise-specs"><strong>Character:</strong> Balanced, natural, soothing<br><strong>Best for:</strong> Sleep, relaxation, studying, tinnitus relief</p>
                    </div>

                    <div class="info-card">
                        <h4><i class="ri-cloud-line"></i> Brown Noise</h4>
                        <p>Also called Brownian or red noise, it has even more bass emphasis (6dB/octave rolloff). Named after Robert Brown who described Brownian motion, not the color. It produces a deep, rumbling sound like a waterfall, distant thunder, or strong wind. Many people find it the most relaxing noise color.</p>
                        <p class="noise-specs"><strong>Character:</strong> Deep, rumbly, powerful<br><strong>Best for:</strong> Deep relaxation, meditation, blocking low-frequency sounds</p>
                    </div>
                </div>

                <h3>Benefits of Noise for Sleep and Focus</h3>
                <p>Research suggests that consistent background noise can improve sleep quality and cognitive performance in several ways:</p>

                <ul class="feature-list">
                    <li><strong>Sound Masking:</strong> Continuous noise covers up sudden sounds (doors, traffic, conversations) that might otherwise disturb sleep or concentration</li>
                    <li><strong>Reduced Cognitive Load:</strong> A consistent auditory environment reduces the brain's need to process changing sounds, freeing up mental resources</li>
                    <li><strong>Sleep Onset:</strong> Studies show pink noise can help people fall asleep faster and experience deeper slow-wave sleep</li>
                    <li><strong>Tinnitus Relief:</strong> Background noise can help mask the phantom sounds of tinnitus, providing relief for sufferers</li>
                    <li><strong>Memory Consolidation:</strong> Some research indicates pink noise during sleep may enhance memory consolidation</li>
                    <li><strong>ADHD and Focus:</strong> Some individuals with ADHD report improved focus with background noise, though results vary by person</li>
                </ul>

                <h3>Choosing the Right Noise</h3>
                <p>The best noise color depends on your personal preference and intended use:</p>

                <ul class="feature-list">
                    <li><strong>For Sleep:</strong> Most people prefer pink or brown noise. Pink noise is gentler, while brown noise provides a deeper, more enveloping sound</li>
                    <li><strong>For Focus/Studying:</strong> Try pink noise first. Some prefer white noise for more effective sound masking in noisy environments</li>
                    <li><strong>For Relaxation:</strong> Brown noise is often the most relaxing due to its deep, soothing quality</li>
                    <li><strong>For Tinnitus:</strong> Start with pink noise, then experiment. The goal is to match the frequency range of your tinnitus</li>
                    <li><strong>For Babies:</strong> White noise is traditional, but pink noise may be safer for developing ears due to lower high-frequency content</li>
                </ul>

                <h3>Safe Listening Practices</h3>
                <p>While noise generators are generally safe, follow these guidelines:</p>
                <ul class="feature-list">
                    <li><strong>Keep Volume Moderate:</strong> Listen at the lowest effective volume. If you need to raise your voice to be heard over the noise, it's too loud</li>
                    <li><strong>Use Quality Speakers/Headphones:</strong> Cheap speakers can distort at certain frequencies, reducing effectiveness and potentially causing fatigue</li>
                    <li><strong>Take Breaks:</strong> If using for extended periods, give your ears periodic rest</li>
                    <li><strong>Distance Matters:</strong> Place speakers at a reasonable distance rather than right next to your head</li>
                </ul>
            </article>
        </section>

        <!-- Mathematics & Algorithms Section -->
        <section class="content-section algorithms-section" id="algorithms">
            <article class="content-article">
                <h2>The Mathematics Behind Noise Generation</h2>
                <p class="intro-text">Understanding the mathematical foundations of noise generation reveals why different colors sound so different. Each noise type follows a specific power spectral density function that determines how energy is distributed across frequencies.</p>

                <h3>Power Spectral Density</h3>
                <p>The "color" of noise is defined by its power spectral density S(f), which describes how power is distributed across frequencies. For colored noise, this follows the general form:</p>

                <div class="math-block">
                    <code>S(f) = 1 / f<sup>a</sup></code>
                    <p class="math-desc">Where <strong>f</strong> is frequency and <strong>a</strong> determines the noise color</p>
                </div>

                <div class="info-grid">
                    <div class="info-card algorithm-card">
                        <h4><i class="ri-flashlight-line"></i> White Noise (a = 0)</h4>
                        <div class="math-block small">
                            <code>S(f) = constant</code>
                        </div>
                        <p><strong>Algorithm:</strong> Pure random sampling</p>
                        <pre class="code-block">for each sample:
    output[i] = random(-1, 1)</pre>
                        <p>White noise has flat spectral density - equal power at all frequencies. Generated by sampling a uniform random distribution, where each sample is independent. The power per Hz is constant, but since there are more high frequencies in each octave, it sounds "bright" or "hissy".</p>
                        <p class="noise-specs"><strong>Spectral slope:</strong> 0 dB/octave<br><strong>Autocorrelation:</strong> Delta function (no memory)</p>
                    </div>

                    <div class="info-card algorithm-card">
                        <h4><i class="ri-contrast-line"></i> Pink Noise (a = 1)</h4>
                        <div class="math-block small">
                            <code>S(f) = 1/f</code>
                        </div>
                        <p><strong>Algorithm:</strong> Paul Kellet's refined method (IIR filter bank)</p>
                        <pre class="code-block">b0 = 0.99886*b0 + white*0.0555179
b1 = 0.99332*b1 + white*0.0750759
b2 = 0.96900*b2 + white*0.1538520
b3 = 0.86650*b3 + white*0.3104856
b4 = 0.55000*b4 + white*0.5329522
b5 = -0.7616*b5 - white*0.0168980
pink = b0+b1+b2+b3+b4+b5+b6+white*0.5362
b6 = white * 0.115926</pre>
                        <p>Pink noise has equal power per octave. The Kellet algorithm uses 6 first-order IIR filters in parallel, each tuned to produce the 1/f slope. The coefficients were empirically optimized to achieve &lt;0.05dB error from ideal pink noise across the audio spectrum.</p>
                        <p class="noise-specs"><strong>Spectral slope:</strong> -3 dB/octave<br><strong>Self-similarity:</strong> Scale-invariant (fractal)</p>
                    </div>

                    <div class="info-card algorithm-card">
                        <h4><i class="ri-cloud-line"></i> Brown Noise (a = 2)</h4>
                        <div class="math-block small">
                            <code>S(f) = 1/f<sup>2</sup></code>
                        </div>
                        <p><strong>Algorithm:</strong> Integrated white noise (random walk)</p>
                        <pre class="code-block">lastOut = 0
for each sample:
    white = random(-1, 1)
    output[i] = (lastOut + 0.02*white) / 1.02
    lastOut = output[i]</pre>
                        <p>Brown noise is the integral of white noise, equivalent to Brownian motion in one dimension. Each sample depends on the previous, creating a "random walk". The leaky integrator (division by 1.02) prevents DC drift while maintaining the 1/f<sup>2</sup> characteristic.</p>
                        <p class="noise-specs"><strong>Spectral slope:</strong> -6 dB/octave<br><strong>Physical analog:</strong> Brownian particle motion</p>
                    </div>
                </div>

                <h3>The Filter Bank Approach</h3>
                <p>Pink noise generation typically uses parallel filter banks because the 1/f spectrum cannot be created with a simple finite-order filter. The Kellet method approximates the ideal response using cascaded first-order sections:</p>

                <div class="math-block">
                    <code>H(z) = sum of [ g<sub>k</sub> / (1 - p<sub>k</sub>z<sup>-1</sup>) ]</code>
                    <p class="math-desc">Where each section contributes a different frequency band</p>
                </div>

                <p>The pole positions (p<sub>k</sub>) are logarithmically spaced to cover the audio range, and the gains (g<sub>k</sub>) are chosen to sum to the correct 1/f response. This approach achieves excellent accuracy with minimal computation.</p>

                <h3>Frequency Domain Relationships</h3>
                <p>The noise colors form a mathematical family related by integration and differentiation:</p>

                <div class="relationship-diagram">
                    <div class="rel-item">
                        <span class="rel-label">Violet (a=-2)</span>
                        <span class="rel-arrow">d/dt</span>
                    </div>
                    <div class="rel-item">
                        <span class="rel-label">Blue (a=-1)</span>
                        <span class="rel-arrow">d/dt</span>
                    </div>
                    <div class="rel-item">
                        <span class="rel-label">White (a=0)</span>
                        <span class="rel-arrow">integrate</span>
                    </div>
                    <div class="rel-item">
                        <span class="rel-label">Pink (a=1)</span>
                        <span class="rel-arrow">integrate</span>
                    </div>
                    <div class="rel-item">
                        <span class="rel-label">Brown (a=2)</span>
                    </div>
                </div>

                <p>Differentiating a signal boosts high frequencies (+6 dB/octave), while integrating boosts low frequencies (-6 dB/octave). This means brown noise is white noise integrated once, and pink noise sits exactly halfway between them.</p>

                <h3>Digital Implementation Considerations</h3>
                <ul class="feature-list">
                    <li><strong>Sample Rate:</strong> Higher sample rates provide better high-frequency accuracy. At 44.1kHz, the Nyquist limit is 22.05kHz, covering the full audible range</li>
                    <li><strong>Bit Depth:</strong> 32-bit float provides sufficient dynamic range for noise generation without quantization artifacts</li>
                    <li><strong>Buffer Looping:</strong> Pre-computed buffers (2+ seconds) are looped for efficiency. The buffer must be long enough to avoid perceptible repetition</li>
                    <li><strong>Random Number Quality:</strong> JavaScript's Math.random() is sufficient for audio noise, though cryptographic randomness isn't required</li>
                    <li><strong>Gain Compensation:</strong> Different noise colors have different RMS levels; brown noise requires ~3.5x gain boost to match perceived loudness</li>
                </ul>

                <h3>Why Pink Noise Sounds "Natural"</h3>
                <p>Pink noise (1/f noise) appears remarkably often in nature and human perception:</p>
                <ul class="feature-list">
                    <li><strong>Natural Sounds:</strong> Rainfall, wind, ocean waves, and rustling leaves all exhibit approximate 1/f spectra</li>
                    <li><strong>Human Hearing:</strong> Our perception of loudness roughly follows a logarithmic scale, matching the octave-based energy distribution of pink noise</li>
                    <li><strong>Music:</strong> Analysis of diverse musical genres shows their long-term spectral content approximates pink noise</li>
                    <li><strong>Biology:</strong> Heart rate variability, neural activity, and many biological signals show 1/f characteristics</li>
                </ul>
                <p>This ubiquity suggests that 1/f noise represents a fundamental pattern in complex systems operating at the boundary between order and randomness.</p>
            </article>
        </section>

        <footer class="site-footer">
            <div class="footer-content">
                <div class="footer-brand">
                    <span class="footer-logo">Noise Generator</span>
                    <p>Free online white, pink, and brown noise generator. Perfect for sleep, focus, relaxation, and tinnitus masking.</p>
                </div>
                <div class="footer-links">
                    <h4>Quick Links</h4>
                    <a href="#generator">Generator</a>
                    <a href="#mixer">Mixer</a>
                    <a href="#about-noise">The Science</a>
                </div>
                <div class="footer-related">
                    <h4>Related Tools</h4>
                    <a href="https://sirengenerator.com" target="_blank">Siren Generator</a>
                </div>
            </div>
            <div class="footer-bottom">
                <p>Part of the Audio Tools Network. For educational and personal use.</p>
            </div>
        </footer>
    </div>

    <script src="{{ url_for('static', filename='js/noise.js') }}"></script>
</body>
</html>
